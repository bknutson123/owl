<html>

<head>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>
<form>
    Enter A Utah City: <input type="text" id="cityform" value=""><br> Suggestion: <span id="txtHint">Empty</span>
    <input id="weatherButton" type="submit" value="Submit">
    <p>City</p>
    <textarea id="displayCity">No City</textarea>
    <p>Current Weather</p>
    <div id="weather">No weather</div>
    </div>
</form>
<script>
$("cityForm").keyup(function(e) {
    if ($("#cityField").val() === "") {
            $("#txtHint").html("");
        }
        var url = "getcity?q=" + value;
        $.getJSON(url, function(data) {
                var everything;
                everything = "<ul>";
                $.each(data, function(i, item) {
                    everything += "<li> " + data[i].city;
                });
                everything += "</ul>";
              //  $('#suggestionHeader').text("Suggestions");
                $("#txtHint").html(everything);
            })
           // .fail(function(jqXHR, textStatus, errorThrown) {
        //        console.log('getJSON request failed! ' + textStatus);
         //       console.log("incoming " + jqXHR.responseText);
          //  })
    });
fs.readFile(__dirname + '/cities.dat.txt',function(err,data) {
  if(err) throw err;
  var cities = data.toString().split("\n");
  for(var i = 0; i < cities.length; i++) {
    console.log(cities[i]);
  }
});
var myRe = new RegExp("^" + req.query.q);
console.log(myRe);
var result = cities[i].search(myRe);
if(result != -1) {
  console.log(cities[i]);
}
var jsonresult = [];
for(var i = 0; i < cities.length; i++) {
  var result = cities[i].search(myRe);
  if(result != -1) {
    console.log(cities[i]);
    jsonresult.push({city:cities[i]});
  }
}
console.log(jsonresult);
})
</script>

</html>
